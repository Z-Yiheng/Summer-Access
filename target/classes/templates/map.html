<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博客列表</title>
    <link rel="stylesheet" href="/Utils/semantic_ui/semantic.css" th:href="@{/Utils/semantic_ui/semantic.css}">
    <script src="/Utils/jquery-3.6.0.js" th:src="@{/Utils/jquery-3.6.0.js}"></script>
    <script src="/Utils/semantic_ui/semantic.min.js" th:src="@{/Utils/semantic_ui/semantic.min.js}"></script>
</head>

<body>
    <div class="ui container">
        <div class="ui visible left vertical sidebar thin menu">
            <div class="item">
                <img class="ui medium circular image" src="/img/logo.jpg" th:src="@{'/images/'+${person.logo}}" alt="">
                <div class="ui horizontal divider">
                    博主
                </div>
                <span th:text="${person.othername}">Z-Yiheng</span>
            </div>
            <a class="item" th:href="@{/personal}">
                <i class="home icon"></i> 个人主页
            </a>
            <a class="blue active item" th:href="@{/map}">
                <i class="table icon"></i> 列表管理
            </a>
            <a class="item" th:href="@{/published}">
                <i class="file out line icon"></i> 发布博客
            </a>
            <a class="item" th:href="@{/main}">
                <i class="undo alternate icon"></i> 返回博客
            </a>
            <a class="item" th:href="@{/logout}">
                <i class="sign out alternate icon"></i> 注销账号
            </a>
        </div>
        <div class="pusher">
            <div class="ui basic segment">
                <table class="ui selectable celled striped table" style="margin-top: 30px;">
                    <thead>
                        <tr>
                            <th class="wide">ID</th>
                            <th class="three wide">标题</th>
                            <th class="three wide">添加日期</th>
                            <th class="six wide">博客简介</th>
                            <th class="one wide">发布</th>
                            <th class="four wide">操作</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr th:each=" item: ${list}">
                            <td name="realId" style="display: none" th:text="${item.id}"></td>
                            <td><span class="numberClass"></span></td>
                            <td th:text="${item.title}"></td>
                            <td th:text="${#dates.format(item.publish_time,'yyyy-MM-dd')}"></td>
                            <td th:text="${item.brief_content}"></td>
                            <td th:text="${item.published}==true?'是':'否'"></td>

                            <td>

                                <button class="ui inverted red button mini" id="delete"><a th:href="@{'/deleteBlog/'+${item.id}}">删除</a></button>
                                <button class="ui inverted green button mini"><a th:href="@{'/refresh/'+${item.id}}">编辑</a></button>

                            </td>
                        </tr>

                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="7">
                                <div class="ui inverted divided stackable grid">
                                    <div class="two wide column" style="text-align: center;">
                                        <button class="ui orange basic mini button"><a th:href="@{/map?pageNumber=1}">首页</a></button>
                                    </div>
                                    <div class="two wide column" style="text-align: center;">
                                        <button class="ui orange basic mini button"><a th:href="@{'/map?pageNumber='+${pageNo - 1}}">上一页</a></button>
                                    </div>

                                    <div class="eight wide column" style="text-align: center;">
                                        <p>第 <span th:text="${pageNo}"></span> 页，共 <span th:text="${maxPage}"></span> 页，有 <span th:text="${totalCount}"></span> 篇文章</p>
                                    </div>

                                    <div class="two wide column" style="text-align: center;">
                                        <button class="ui orange basic mini button"><a th:href="@{'/map?pageNumber='+${pageNo + 1}}">下一页</a></button>
                                    </div>
                                    <div class="two wide column" style="text-align: center;">
                                        <button class="ui orange basic mini button"><a th:href="@{'/map?pageNumber='+${maxPage}}">尾页</a></button>
                                    </div>
                                </div>
                            </th>
                        </tr>
                    </tfoot>
                </table>

            </div>
        </div>
    </div>
    </div>
    <img class="ui fluid image" src="/img/footer.png" th:src="@{/img/footer.png}" alt="">

    <script>
        $('#delete').click(function (){
            $('.tiny.modal')
                .modal('show')
            ;
        });



        $(function () {
            function number() {
                for (var i =0;i<$(".numberClass").length;i++) {
                    $(".numberClass").get(i).innerHTML = i+1;
                }
            }
            number();
        });
    </script>
</body>

</html>